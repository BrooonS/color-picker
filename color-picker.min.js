/*!
 * ==============================================================
 *  COLOR PICKER PLUGIN 2.0.0
 * ==============================================================
 * Author: Taufik Nurrohman <https://github.com/taufik-nurrohman>
 * License: MIT
 * --------------------------------------------------------------
 */
!function(n,t,e){function r(n){var t,e,r,i,o,u,c,a,f=+n[0],s=+n[1],l=+n[2];switch(i=Math.floor(6*f),o=6*f-i,u=l*(1-s),c=l*(1-o*s),a=l*(1-(1-o)*s),i=i||0,c=c||0,a=a||0,i%6){case 0:t=l,e=a,r=u;break;case 1:t=c,e=l,r=u;break;case 2:t=u,e=l,r=a;break;case 3:t=u,e=c,r=l;break;case 4:t=a,e=u,r=l;break;case 5:t=l,e=u,r=c}return[b(255*t),b(255*e),b(255*r),p(v(n[3])?+n[3]:1,2)]}function i(n){var t,e,r=+n[0]/255,i=+n[1]/255,o=+n[2]/255,u=Math.max(r,i,o),c=Math.min(r,i,o),a=u,f=u-c,e=0===u?0:f/u;if(u===c)t=0;else{switch(u){case r:t=(i-o)/f+(o>i?6:0);break;case i:t=(o-r)/f+2;break;case o:t=(r-i)/f+4}t/=6}return[t,e,a,v(n[3])?+n[3]:1]}function o(n,t){var e="touches",r="clientX",i="clientY",o=t[e]?t[e][0][r]:t[r],u=t[e]?t[e][0][i]:t[i],a=c(n);return[o-a[0],u-a[1]]}function u(n,t){if(n===t)return n;for(;(n=n.parentElement)&&n!==t;);return n}function c(t){var e,r,i;return t===n?(e=n.pageXOffset||C.scrollLeft,r=n.pageYOffset||C.scrollTop):(i=t.getBoundingClientRect(),e=i.left,r=i.top),[e,r]}function a(t){return t===n?[n.innerWidth,n.innerHeight]:[t.offsetWidth,t.offsetHeight]}function f(n){n&&n.preventDefault()}function s(n){return"function"==typeof n}function l(n){return"object"==typeof n}function v(n){return void 0!==n||null===n}function d(n){return"string"==typeof n}function h(n,t){return n<t[0]?t[0]:n>t[1]?t[1]:n}function p(n,t){return+n.toFixed(t)}function g(n,t){return parseInt(n,t||10)}function b(n){return Math.round(n)}function m(n,t){return n.toString(t)}function k(n,t,e){for(var r=0,i=t.length;i>r;++r)n.removeEventListener(t[r],e,!1)}function y(n,t,e){for(var r=0,i=t.length;i>r;++r)n.addEventListener(t[r],e,!1)}function x(n,t,e){n.style[t]=e}var C=t.documentElement,M="HEX",H="children",E="top",w="right",_="left",T="px",L=n.setTimeout,O=["touchstart","mousedown"],j=["touchmove","mousemove"],z=["orientationchange","resize"],X=["touchend","mouseup"],I="__instance__";!function(n){n.version="2.0.0",n[I]={},n.each=function(t,e){var r,i;return L(function(){i=n[I];for(r in i)t.call(i[r],r)},0===e?0:e||1),n},n[M]=function(n){if(d(n)){var t=(n=n.trim()).length;if(4!==t&&7!==t||"#"!==n[0]){if((5===t||9===t)&&"#"===n[0]&&/^#([a-z\d]{1,2}){4}$/i.test(n))return 5===t?[g(n[1]+n[1],16),g(n[2]+n[2],16),g(n[3]+n[3],16),p(g(n[4]+n[4],16)/255,2)]:[g(n[1]+n[2],16),g(n[3]+n[4],16),g(n[5]+n[6],16),p(g(n[7]+n[8],16)/255,2)]}else if(/^#([a-z\d]{1,2}){3}$/i.test(n))return 4===t?[g(n[1]+n[1],16),g(n[2]+n[2],16),g(n[3]+n[3],16),1]:[g(n[1]+n[2],16),g(n[3]+n[4],16),g(n[5]+n[6],16),1];return[0,0,0,1]}return"#"+("000000"+m(+n[2]|+n[1]<<8|+n[0]<<16,16)).slice(-6)+(v(n[3])&&n[3]<1?m(b(255*n[3])+65536,16).substr(-2):"")},n._=n.prototype}(n[e]=function(d,p){function g(n){var t,e=B[s(B[P.color])?P.color:M];if(t=d.dataset.color)return v(n)?d.dataset.color=e(t):e(t);if(t=d.value)return v(n)?d.value=e(t):e(t);if(t=d.textContent)return v(n)?d.textContent=e(t):e(t);if(!v(n))return[0,0,0,1]}function b(n,t){if(!v(n))return D={},A;if(v(D[n]))if(v(t))for(var e=0,r=D[n].length;r>e;++e)t===D[n][e]&&D[n].splice(e,1);else delete D[n];return A}function m(n,t){return v(D[n])||(D[n]=[]),v(t)&&D[n].push(t),A}function N(n,t){if(!v(D[n]))return A;for(var e=0,r=D[n].length;r>e;++e)D[n][e].apply(A,t);return A}function W(){return F.parentNode}function Y(n){var t=n.target,e=d===u(t,d);e?!W()&&R(P.parent):S()}function $(e,s){function p(n){ft&&B(n),st&&D(n),lt&&U(n),K=r(Q),(ft||st||lt)&&(N(ut||ct||at?"start":"drag",K),N("change",K)),ut=ct=at=0}function b(n){K=r(Q);var t=n.target,e=d===u(t,d),i=F===u(t,F);A.current=null,e||i?i&&(ft||st||lt)&&N("stop",K):W()&&!1!==P.events&&S(),ft=st=lt=0}function m(n){A.current=V,ut=ft=1,p(n),f(n)}function M(n){A.current=Z,ct=st=1,p(n),f(n)}function H(n){A.current=nt,at=lt=1,p(n),f(n)}function I(n){v(n[1])&&x(et,w,ht-bt/2-ht*+n[1]+T),v(n[2])&&x(et,E,pt-mt/2-pt*+n[2]+T),v(n[0])&&x(rt,E,kt-yt/2-kt*+n[0]+T),v(n[3])&&x(ot,E,xt-Ct/2-xt*+n[3]+T)}function B(n){var t=o(V,n),e=h(t[0],[0,ht]),r=h(t[1],[0,pt]);Q[1]=1-(ht-e)/ht,Q[2]=(pt-r)/pt,vt()}function D(n){Q[0]=(kt-h(o(Z,n)[1],[0,kt]))/kt,vt()}function U(n){Q[3]=(xt-h(o(nt,n)[1],[0,xt]))/xt,vt()}function vt(){I(Q);var n=r(Q),t=r([Q[0],1,1]);x(tt,"backgroundColor","rgb("+t[0]+","+t[1]+","+t[2]+")"),x(it,"backgroundImage","linear-gradient(rgb("+n[0]+","+n[1]+","+n[2]+"),transparent)")}Q=i(K=g()),e||((s||P.parent||J).appendChild(F),A.visible=!0),R=function(n){return $(0,n),N("enter",K),A},S=function(){var e=W();return e&&(e.removeChild(F),A.current=null,A.visible=!1),k(V,O,m),k(Z,O,M),k(nt,O,H),k(t,j,p),k(t,X,b),k(n,z,G),N("exit",K),A},q=function(t){var e=a(n),r=a(C),i=e[0]-r[0],o=e[1]-C.clientHeight,u=c(n),f=c(d),s=a(F),p=s[0],g=s[1],b=f[0]+u[0],m=f[1]+u[1]+a(d)[1];if(l(t))v(t[0])&&(b=t[0]),v(t[1])&&(m=t[1]);else{var k=u[0],y=u[1],M=u[0]+e[0]-p-i,H=u[1]+e[1]-g-o;b=h(b,[k,M])>>0,m=h(m,[y,H])>>0}return x(F,_,b+T),x(F,E,m+T),N("fit",K),A},G=function(){return q()};var dt=a(V),ht=dt[0],pt=dt[1],gt=a(et),bt=gt[0],mt=gt[1],kt=a(Z)[1],yt=a(rt)[1],xt=a(nt)[1],Ct=a(ot)[1];e?(!1!==P.events&&y(d,P.events,Y),L(function(){N("change",K)},1)):(y(V,O,m),y(Z,O,M),y(nt,O,H),y(t,j,p),y(t,X,b),y(n,z,G),q()),A.get=function(){return g()},A.set=function(n,t,e,r){return Q=i([n,t,e,r]),vt(),A},vt()}if(d){var A=this,B=n[e],D={},F=t.createElement("div"),P=Object.assign({color:M,events:O,parent:null},!1===p||p instanceof Array?{e:p}:p||{});if(d[e])return A;if(!(A instanceof B))return new B(d,p);B[I][d.id||d.name||Object.keys(B[I]).length]=A,d[e]=1,A.visible=!1,F.className="color-picker",F.innerHTML='<div><div class="color-picker:sv"><div></div><div></div><div></div><i></i></div><div class="color-picker:h"><div></div><i></i></div><div class="color-picker:a"><div></div><div></div><i></i></div></div>';var R,S,q,G,J=t.body,K=g(),Q=i(K),U=F.firstChild,V=U[H][0],Z=U[H][1],nt=U[H][2],tt=V[H][0],et=V[H][3],rt=(Z[H][0],Z[H][1]),it=nt[H][0],ot=nt[H][2],ut=0,ct=0,at=0,ft=0,st=0,lt=0;$(1),A.color=function(n,t,e,r){return B[s(B[P.color])?P.color:M]([n,t,e,r])},A.current=null,A.enter=R,A.exit=S,A.fire=N,A.fit=q,A.hooks=D,A.off=b,A.on=m,A.pop=function(){return d[e]?(delete d[e],!1!==P.events&&k(d,P.events,Y),S(),N("pop",K)):A},A.value=function(n,t,e,r){return A.set(n,t,e,r),N("change",[n,t,e,r])},A.self=F,A.source=d,A.state=P}})}(this,this.document,"CP");
