/*!
 * ==============================================================
 *  COLOR PICKER PLUGIN 2.0.0
 * ==============================================================
 * Author: Taufik Nurrohman <https://github.com/taufik-nurrohman>
 * License: MIT
 * --------------------------------------------------------------
 */
!function(n,t,e){function r(n){var t,e,r,i,o,u,c,f,a=+n[0],s=+n[1],l=+n[2];switch(i=Math.floor(6*a),o=6*a-i,u=l*(1-s),c=l*(1-o*s),f=l*(1-(1-o)*s),i=i||0,c=c||0,f=f||0,i%6){case 0:t=l,e=f,r=u;break;case 1:t=c,e=l,r=u;break;case 2:t=u,e=l,r=f;break;case 3:t=u,e=c,r=l;break;case 4:t=f,e=u,r=l;break;case 5:t=l,e=u,r=c}return[b(255*t),b(255*e),b(255*r),p(v(n[3])?+n[3]:1,3)]}function i(n){var t,e,r=+n[0]/255,i=+n[1]/255,o=+n[2]/255,u=Math.max(r,i,o),c=Math.min(r,i,o),f=u,a=u-c,e=0===u?0:a/u;if(u===c)t=0;else{switch(u){case r:t=(i-o)/a+(o>i?6:0);break;case i:t=(o-r)/a+2;break;case o:t=(r-i)/a+4}t/=6}return[t,e,f,v(n[3])?+n[3]:1]}function o(n,t){var e="touches",r="clientX",i="clientY",o=t[e]?t[e][0][r]:t[r],u=t[e]?t[e][0][i]:t[i],f=c(n);return[o-f[0],u-f[1]]}function u(n,t){if(n===t)return n;for(;(n=n.parentElement)&&n!==t;);return n}function c(t){var e,r,i;return t===n?(e=n.pageXOffset||E.scrollLeft,r=n.pageYOffset||E.scrollTop):(i=t.getBoundingClientRect(),e=i.left,r=i.top),[e,r]}function f(t){return t===n?[n.innerWidth,n.innerHeight]:[t.offsetWidth,t.offsetHeight]}function a(n){n&&n.preventDefault()}function s(n){return"function"==typeof n}function l(n){return"object"==typeof n}function v(n){return void 0!==n||null===n}function d(n){return"string"==typeof n}function h(n,t){return n<t[0]?t[0]:n>t[1]?t[1]:n}function p(n,t){return+n.toFixed(t)}function g(n,t){return parseInt(n,t||10)}function b(n){return Math.round(n)}function m(n,t){return n.toString(t)}function k(n,t,e){for(var r=0,i=t.length;i>r;++r)n.removeEventListener(t[r],e,!1)}function y(n,t,e){for(var r=0,i=t.length;i>r;++r)n.addEventListener(t[r],e,!1)}function C(n,t,e){n.style[t]=e}var x=t.body,E=t.documentElement,H="HEX",M="children",_="top",w="right",L="left",O="px",j=n.setTimeout,z=["touchstart","mousedown"],T=["touchmove","mousemove"],X=["orientationchange","resize"],I=["touchend","mouseup"],N="__instance__";!function(n){n.version="2.0.0",n[N]={},n.each=function(t,e){var r,i;return j(function(){i=n[N];for(r in i)t.call(i[r],r)},0===e?0:e||1),n},n[H]=function(n){if(d(n)){var t=n.length;if(4!==t&&7!==t||"#"!==n[0]){if((5===t||9===t)&&"#"===n[0]&&/^\s*#([a-z\d]{1,2}){4}\s*$/i.test(n))return 5===t?[g(n[1]+n[1],16),g(n[2]+n[2],16),g(n[3]+n[3],16),p(g(n[4]+n[4],16)/255,3)]:[g(n[1]+n[2],16),g(n[3]+n[4],16),g(n[5]+n[6],16),p(g(n[7]+n[8],16)/255,3)]}else if(/^\s*#([a-z\d]{1,2}){3}\s*$/i.test(n))return 4===t?[g(n[1]+n[1],16),g(n[2]+n[2],16),g(n[3]+n[3],16),1]:[g(n[1]+n[2],16),g(n[3]+n[4],16),g(n[5]+n[6],16),1];return[0,0,0,1]}return"#"+("000000"+m(+n[2]|+n[1]<<8|+n[0]<<16,16)).slice(-6)+(v(n[3])&&n[3]<1?m(b(255*n[3])+65536,16).substr(-2):"")},n._=n.prototype}(n[e]=function(d,p){function g(n){var t,e=B[s(B[R.color])?R.color:H];if(t=d.dataset.color)return v(n)?d.dataset.color=e(t):e(t);if(t=d.value)return v(n)?d.value=e(t):e(t);if(t=d.textContent)return v(n)?d.textContent=e(t):e(t);if(!v(n))return[0,0,0,1]}function b(n,t){if(!v(n))return D={},A;if(v(D[n]))if(v(t))for(var e=0,r=D[n].length;r>e;++e)t===D[n][e]&&D[n].splice(e,1);else delete D[n];return A}function m(n,t){return v(D[n])||(D[n]=[]),v(t)&&D[n].push(t),A}function W(n,t){if(!v(D[n]))return A;for(var e=0,r=D[n].length;r>e;++e)D[n][e].apply(A,t);return A}function Y(){return P.parentNode}function $(n){var t=n.target,e=d===u(t,d);e?!Y()&&S(R.parent):q()}function F(e,s){function p(n){J=r(K),ft&&B(n),at&&D(n),st&&Q(n),(ft||at||st)&&(W(ot||ut||ct?"start":"drag",J),W("change",J)),ot=ut=ct=0}function b(n){J=r(K);var t=n.target,e=d===u(t,d),i=P===u(t,P);A.current=null,e||i?i&&(ft||at||st)&&W("stop",J):Y()&&!1!==R.e&&q(),ft=at=st=0}function m(n){A.current=U,ot=ft=1,p(n),a(n)}function H(n){A.current=V,ut=at=1,p(n),a(n)}function M(n){A.current=Z,ct=st=1,p(n),a(n)}function N(n){v(n[1])&&C(tt,w,dt-gt/2-dt*+n[1]+O),v(n[2])&&C(tt,_,ht-bt/2-ht*+n[2]+O),v(n[0])&&C(et,_,mt-kt/2-mt*+n[0]+O),v(n[3])&&C(it,_,yt-Ct/2-yt*+n[3]+O)}function B(n){var t=o(U,n),e=h(t[0],[0,dt]),r=h(t[1],[0,ht]);K[1]=1-(dt-e)/dt,K[2]=(ht-r)/ht,lt()}function D(n){K[0]=(mt-h(o(V,n)[1],[0,mt]))/mt,lt()}function Q(n){K[3]=(yt-h(o(Z,n)[1],[0,yt]))/yt,lt()}function lt(){N(K);var n=r(K),t=r([K[0],1,1]);C(nt,"backgroundColor","rgb("+t[0]+","+t[1]+","+t[2]+")"),C(rt,"backgroundImage","linear-gradient(rgb("+n[0]+","+n[1]+","+n[2]+"),transparent)")}K=i(J=g()),e||((s||R.parent||x).appendChild(P),A.visible=!0),S=function(n){return F(0,n),W("enter",J),A},q=function(){var e=Y();return e&&(e.removeChild(P),A.current=null,A.visible=!1),k(U,z,m),k(V,z,H),k(Z,z,M),k(t,T,p),k(t,I,b),k(n,X,G),W("exit",J),A},G=function(t){var e=f(n),r=(f(E),n[0]-E[0]),i=n[1]-E.clientHeight,o=c(n),u=c(d),a=f(P),s=a[0],p=a[1],g=u[0]+o[0],b=u[1]+o[1]+f(d)[1];if(l(t))v(t[0])&&(g=t[0]),v(t[1])&&(b=t[1]);else{var m=o[0],k=o[1],y=o[0]+e[0]-s-r,x=o[1]+e[1]-p-i;g=h(g,[m,y])>>0,b=h(b,[k,x])>>0}return C(P,L,g+O),C(P,_,b+O),W("fit",J),A};var vt=f(U),dt=vt[0],ht=vt[1],pt=f(tt),gt=pt[0],bt=pt[1],mt=f(V)[1],kt=f(et)[1],yt=f(Z)[1],Ct=f(it)[1];e?(!1!==R.e&&y(d,R.e,$),j(function(){W("change",J)},1)):(y(U,z,m),y(V,z,H),y(Z,z,M),y(t,T,p),y(t,I,b),y(n,X,G),G()),A.get=function(){return g()},A.set=function(n,t,e,r){return K=i([n,t,e,r]),lt(),A},lt()}if(d){var A=this,B=n[e],D={},P=t.createElement("div"),R=Object.assign({color:H,e:z,parent:null},!1===p||p instanceof Array?{e:p}:p||{});if(d[e])return A;if(!(A instanceof B))return new B(d,R);B[N][d.id||d.name||Object.keys(B[N]).length]=A,d[e]=1,A.visible=!1,P.className="color-picker",P.innerHTML='<div><div class="color-picker:sv"><div></div><div></div><div></div><i></i></div><div class="color-picker:h"><div></div><i></i></div><div class="color-picker:a"><div></div><div></div><i></i></div></div>';var S,q,G,J=g(),K=i(J),Q=P.firstChild,U=Q[M][0],V=Q[M][1],Z=Q[M][2],nt=U[M][0],tt=U[M][3],et=(V[M][0],V[M][1]),rt=Z[M][0],it=Z[M][2],ot=0,ut=0,ct=0,ft=0,at=0,st=0;F(1),A.color=function(n,t,e,r){return B[s(B[R.color])?R.color:H]([n,t,e,r])},A.current=null,A.enter=S,A.exit=q,A.fire=W,A.fit=G,A.hooks=D,A.off=b,A.on=m,A.pop=function(){return d[e]?(delete d[e],!1!==R.e&&k(d,R.e,$),q(),W("pop",J)):A},A.value=function(n,t,e,r){return A.set(n,t,e,r),W("change",[n,t,e,r])},A.self=P,A.source=d,A.state=R}})}(this,this.document,"CP");
