<!DOCTYPE html>
<html dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Color Picker</title>
    <link href="favicon.ico" rel="icon">
    <link href="color-picker.css" rel="stylesheet">
  </head>
  <body>
    <p style="
      background: #ffa;
      border: 1px dashed;
      margin-top: 0;
      padding: .75em 1em;
    ">Like this project? Please support my <a href="https://github.com/mecha-cms">Mecha CMS</a> project too. Thank you!</p>
    <h1>Color Picker</h1>
    <div style="
      background-image: linear-gradient(45deg, #eee 25%, transparent 25%, transparent 75%, #eee 75%, #eee 100%), linear-gradient(45deg, #eee 25%, #fff 25%, #fff 75%, #eee 75%, #eee 100%);
      background-size: 20px 20px;
      background-position: 0 0, 10px 10px;
    ">
      <p style="
        margin: 0;
        padding: 3em;
        font-size: 14px;
      ">
        <input type="text">
      </p>
    </div>
    <h2>Features</h2>
    <ul>
      <li>Light-weight library. No dependencies. <strong>Color Picker</strong> uses plain JavaScript language.</li>
      <li>Simple <abbr title="Application Programming Interface">API</abbr>. Easy to learn.</li>
      <li>Blah blah blah. <mark>TODO</mark></li>
    </ul>
    <h2>Start</h2>
    <pre><code>&lt;!DOCTYPE html&gt;
&lt;html dir="ltr"&gt;
  &lt;head&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;link href="<a href="color-picker.min.css" target="_blank">color-picker.min.css</a>" rel="stylesheet"&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;p&gt;&lt;input type="text"&gt;&lt;/p&gt;
    &lt;script src="<a href="color-picker.min.js" target="_blank">color-picker.min.js</a>"&gt;&lt;/script&gt;
    &lt;script&gt;
    var picker = new CP(document.querySelector('input'));
    picker.on('change', function(r, g, b, a) {
        if (1 === a) {
            this.source.value = 'rgb(' + r + ', ' + g + ', ' + b + ')';
        } else {
            this.source.value = 'rgba(' + r + ', ' + g + ', ' + b + ', ' + a + ')';
        }
    });
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>
    <h2>Configure</h2>
    <pre><code>var picker = new CP(<var>source</var>, <var>state</var> = {
        color: 'HEX',
        e: ['touchstart', 'mousedown'],
        parent: null
    });</code></pre>
    <ul>
      <li><var>source</var> &rarr; The text input element.</li>
      <li><var>state</var> &rarr; The configuration data.</li>
      <li><var>state.color</var> &rarr; Name of the color parser defined in the <code>CP</code> object.</li>
      <li><var>state.e</var> &rarr; Default events to show the color picker pane.</li>
      <li><var>state.parent</var> &rarr; Parent element to append the color picker element (default will be appended to the <code>&lt;body&gt;</code> element).</li>
    </ul>
    <h2>Instance</h2>
    <p>All color picker instances will be stored in <code>CP.__instance__</code>. To iterate the instances is possible with <code>CP.each()</code>:</p>
    <pre><code>CP.each(function(key) {
    console.log(key);
    console.log(this.source);
});</code></pre>
    <ul>
      <li><var>this</var> &rarr; Refers to the color picker instance.</li>
      <li><var>key</var> &rarr; Refers to the color picker target&rsquo;s <code>id</code> or <code>name</code> attribute value, or its current order.</li>
    </ul>
    <h2>Methods and Properties</h2>
    <h3>CP.version</h3>
    <p>Return the color picker version.</p>
    <h3>CP.HEX(color | [r, g, b, a])</h3>
    <p>Hex color converter as the default color parser.</p>
    <pre><code>console.log(CP.HEX('#ff0')); // &rarr; `[255, 255, 0, 1]`
console.log(CP.HEX([255, 255, 0, 1])); // &rarr; `'#ffff00'`</code></pre>
    <h3>CP._</h3>
    <p>Return the color picker prototypes.</p>
    <h3>picker.state</h3>
    <p>Return the color picker states.</p>
    <h3>picker.source</h3>
    <p>Return the <code>&lt;input&gt;</code> element.</p>
    <h3>picker.self</h3>
    <p>Return the color picker element.</p>
    <h3>picker.visible</h3>
    <p>Check if color picker pane is visible.</p>
    <pre><code>if (picker.visible) { &hellip; }</code></pre>
    <h3>picker.set(r, g, b, a)</h3>
    <p>Set color picker state based on the given color data.</p>
    <pre><code>// Set color picker state to yellow, with 50% opacity
picker.set(255, 255, 0, .5);
// Set color picker source value to yellow, with 50% opacity
picker.fire('change', [255, 255, 0, .5]);</code></pre>
    <h3>picker.get()</h3>
    <p>Get current color value as RGBA.</p>
    <pre><code>console.log(picker.get());</code></pre>
    <h3>picker.color(r, g, b, a)</h3>
    <p>Call current color parser function that is defined in the <code>state.color</code> value.</p>
    <h3>picker.enter(to)</h3>
    <p>Show the color picker pane.</p>
    <pre><code>picker.enter(); // Enter to the `&lt;body&gt;` element
picker.enter(document.querySelector('#container')); // Enter to a specific container</code></pre>
    <h3>picker.exit()</h3>
    <p>Hide the color picker pane.</p>
    <pre><code>picker.exit();</code></pre>
    <h3>picker.fit([x, y])</h3>
    <p>Set color picker position measured from the window edges.</p>
    <pre><code>picker.enter();
picker.fit([30, 30]);</code></pre>
    <h3>picker.pop()</h3>
    <p>Remove color picker feature from the source element.</p>
    <h2>Hooks</h2>
    <table border="1">
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>enter</code></td>
          <td>Will be triggered when color picker pane is visible.</td>
        </tr>
        <tr>
          <td><code>exit</code></td>
          <td>Will be triggered when color picker pane is hidden.</td>
        </tr>
        <tr>
          <td><code>fit</code></td>
          <td>Will be triggered when color picker pane is positioned.</td>
        </tr>
        <tr>
          <td><code>change</code></td>
          <td>Will be triggered on every color change.</td>
        </tr>
        <tr>
          <td><code>change.h</code></td>
          <td>Will be triggered on every color hue change.</td>
        </tr>
        <tr>
          <td><code>change.sv</code></td>
          <td>Will be triggered on every color saturation and value change.</td>
        </tr>
        <tr>
          <td><code>change.a</code></td>
          <td>Will be triggered on every color opacity change.</td>
        </tr>
        <tr>
          <td><code>start</code></td>
          <td>Will be triggered when the color picker control starts dragging.</td>
        </tr>
        <tr>
          <td><code>start.h</code></td>
          <td>Will be triggered when the color picker hue control starts dragging.</td>
        </tr>
        <tr>
          <td><code>start.sv</code></td>
          <td>Will be triggered when the color picker saturation and value control starts dragging.</td>
        </tr>
        <tr>
          <td><code>start.a</code></td>
          <td>Will be triggered when the color picker opacity control starts dragging.</td>
        </tr>
        <tr>
          <td><code>drag</code></td>
          <td>Will be triggered when the color picker control is dragging.</td>
        </tr>
        <tr>
          <td><code>drag.h</code></td>
          <td>Will be triggered when the color picker hue control is dragging.</td>
        </tr>
        <tr>
          <td><code>drag.sv</code></td>
          <td>Will be triggered when the color picker saturation and value control is dragging.</td>
        </tr>
        <tr>
          <td><code>drag.a</code></td>
          <td>Will be triggered when the color picker opacity control is dragging.</td>
        </tr>
        <tr>
          <td><code>stop</code></td>
          <td>Will be triggered when the color picker control stops dragging.</td>
        </tr>
        <tr>
          <td><code>stop.h</code></td>
          <td>Will be triggered when the color picker hue control stops dragging.</td>
        </tr>
        <tr>
          <td><code>start.sv</code></td>
          <td>Will be triggered when the color picker saturation and value control stops dragging.</td>
        </tr>
        <tr>
          <td><code>start.a</code></td>
          <td>Will be triggered when the color picker opacity control stops dragging.</td>
        </tr>
        <tr>
          <td><code>pop</code></td>
          <td>Will be triggered after <code>picker.pop()</code>.</td>
        </tr>
      </tbody>
    </table>
    <h3>picker.on(name, fn)</h3>
    <p>Add a new hook.</p>
    <pre><code>picker.on('change', function(r, g, b, a) {
    console.log(this.color(r, g, b, a));
});</code></pre>
    <pre><code>function onChange(r, g, b, a) {
    console.log(this.color(r, g, b, a));
}

picker.on('change', onChange); // With context</code></pre>
    <h3>picker.off(name, fn)</h3>
    <p>Remove a hook.</p>
    <pre><code>picker.off('change');</code></pre>
    <pre><code>picker.off('change', onChange); // With context</code></pre>
    <h3>picker.fire(name, lot)</h3>
    <p>Trigger hooks.</p>
    <pre><code>picker.fire('change', [255, 255, 0, .5]);</code></pre>

    <p><mark>TODO...</mark></p>
    <!--
    <h2>Examples</h2>
    <ul>
      <li><a href="tag-picker.html" target="_blank">No Idea?</a></li>
      <li><a href="tag-picker.value.html" target="_blank">Set Pre-Defined Value</a></li>
      <li><a href="tag-picker.placeholder.html" target="_blank">Set Placeholder</a></li>
      <li><a href="tag-picker.focus.html" target="_blank">Focus State</a></li>
      <li><a href="tag-picker.focus.placeholder.html" target="_blank">Hide Placeholder on Focus</a></li>
      <li><a href="tag-picker.disabled.html" target="_blank">Disabled Input</a></li>
      <li><a href="tag-picker.read-only.html" target="_blank">Read-Only Input</a></li>
      <li><a href="tag-picker.min.html" target="_blank">Limit Minimum Tags</a></li>
      <li><a href="tag-picker.max.html" target="_blank">Limit Maximum Tags</a></li>
      <li><a href="tag-picker.x.html" target="_blank">Enable &ldquo;Remove&rdquo; Button</a></li>
      <li><a href="tag-picker.paste.html" target="_blank">Paste Event</a></li>
      <li><a href="tag-picker.alert.html" target="_blank">Default Alert</a></li>
      <li><a href="tag-picker.alert.false.html" target="_blank">No Alert</a></li>
      <li><a href="tag-picker.alert.function.html" target="_blank">Custom Alert</a></li>
      <li><a href="tag-picker.escape.html" target="_blank">Disable Characters with <code>picker.state.escape</code></a></li>
      <li><a href="tag-picker.f.html" target="_blank">Filter Characters with <code>picker.f</code></a></li>
      <li><a href="tag-picker.i.html" target="_blank">Translations</a></li>
      <li><a href="tag-picker.directory.html" target="_blank">Directory (Experiment)</a></li>
    </ul>
    -->
    <script src="color-picker.js"></script>
    <script>
    var picker = new CP(document.querySelector('input'), {
            parent: document.querySelector('h1 + div p')
        });

    picker.on('change', function(r, g, b, a) {
        this.source.value = this.color(r, g, b, a);
        this.source.parentNode.style.backgroundColor = 'rgba(' + r + ', ' + g + ', ' + b + ', ' + a + ')';
    });
    </script>
  </body>
</html>
